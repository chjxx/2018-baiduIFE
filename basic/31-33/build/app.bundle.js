!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);r(1);var n=[{product:"手机",region:"华东",sale:[120,100,140,160,180,185,190,210,230,245,255,270]},{product:"手机",region:"华北",sale:[80,70,90,110,130,145,150,160,170,185,190,200]},{product:"手机",region:"华南",sale:[220,200,240,250,260,270,280,295,310,335,355,380]},{product:"笔记本",region:"华东",sale:[50,60,80,110,30,20,70,30,420,30,20,20]},{product:"笔记本",region:"华北",sale:[30,35,50,70,20,15,30,50,710,130,20,20]},{product:"笔记本",region:"华南",sale:[80,120,130,140,70,75,120,90,550,120,110,100]},{product:"智能音箱",region:"华东",sale:[10,30,4,5,6,5,4,5,6,5,5,25]},{product:"智能音箱",region:"华北",sale:[15,50,15,15,12,11,11,12,12,14,12,40]},{product:"智能音箱",region:"华南",sale:[10,40,10,6,5,6,8,6,6,6,7,26]}];class a{constructor(e){this.data=JSON.parse(e)}getSelection(){let e=this.data.reduce((e,t)=>(e[0]=e[0].concat(Object.entries(t)),e[1]=e[1].concat(Object.keys(t)),e),[[],[]]);if(e[1]=[...new Set(e[1])],-1!==e[1].indexOf("sale")){let t=e[1].indexOf("sale");e[1].splice(t,1)}return e[1].map((t,r)=>{let n=e[0].reduce((e,r)=>(r[0]===t&&e.push(r[1]),e),[]);return{name:t,sel:[...new Set(n)]}})}searchData(e){let t=this;if(0!==e.product.length&&0!==e.region.length)return 1===e.region.length?r([t.data,e,["region","product"]]):r([t.data,e,["product","region"]]);function r([e,t,r]){return t[r[0]].reduce((n,a)=>{let l=t[r[1]].reduce((t,n)=>{let l=e.find(e=>e[r[0]]===a&&e[r[1]]===n);return t.sel.push({name:r[1],item:n,sale:l.sale}),t},{name:r[0],item:a,sel:[]});return n.push(l),n},[])}}}const l={region:"地区",product:"商品"},i={title:"tt",all:"all_btn",allSeld:"all_btn_seld",item:"item",itemSeld:"item_seld"};class o{constructor(e){this.$container=document.querySelector(e),this.addEventListener(),this.handler=[]}generateElm(e){this.selData=e,this.$container.innerHTML=this.selData.reduce((e,t)=>e+function(e){return`<div class="${e.name}">\n\t\t\t\t<p class="${i.title}">${function(e){return l[e]?l[e]:e}(e.name)}:</p>\n\t\t\t\t<a href="javascript:;" class="${i.all}" data-trigger="${i.allSeld}">全选</a>\n\t\t\t\t${function(e){return e.reduce((e,t,r)=>e+`<a href="javascript:;" class="${i.item}" data-trigger="${i.itemSeld}">${t}</a>`,"")}(e.sel)}\n\t\t\t</div>`}(t),"")}addEventListener(){let e=this;this.$container.addEventListener("click",t=>{let r=t.target;if("A"===r.tagName){let t=r.parentNode,a=r.className;if(-1!==a.indexOf(i.all)){if(a===i.all){let a=t.querySelectorAll("."+i.item);n(r),Array.from(a).forEach(e=>{n(e)}),e.runHandler("datachange",e)}}else if(a===i.itemSeld){let a=t.querySelector("."+i.allSeld);if(1===t.querySelectorAll("."+i.itemSeld).length)return;n(r),a&&n(a),e.runHandler("datachange",e)}else{n(r);let a=t.querySelectorAll("."+i.item),l=t.querySelector("."+i.all);0===a.length&&n(l),e.runHandler("datachange",e)}}function n(e){let t=e.dataset.trigger;e.dataset.trigger=e.className,e.className=t}})}getSeldItems(){let e=this.$container.querySelectorAll("div");return Array.from(e).reduce((e,t)=>{let r=t.querySelectorAll("."+i.itemSeld),n=Array.from(r).reduce((e,t)=>(e.push(t.innerText.trim()),e),[]);return e[t.className]=n,e},{})}addHandler(e,...t){this.handler[e]instanceof Array||(this.handler[e]=[]),this.handler[e].push(...t)}runHandler(e,t){this.handler[e]instanceof Array&&this.handler[e].forEach((e,r)=>{e(t)})}}const s={region:"地区",product:"商品"};class c{constructor(e){this.$container=document.querySelector(e),this.$container.innerHTML="选项不足......!"}generateView(e){this.$container.innerHTML=void 0===e?"选项不足......!":`<table>\n        <thead>${function(e){let t=[],r=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"];return function e(n){if(n instanceof Array)e(n[0]);else{if(t.push(s[n.name]),!(n.sel instanceof Array))return void(void 0!==n.sale&&(t=t.concat(r)));e(n.sel[0])}}(e),t.reduce((e,t)=>e+`<th>${t}</th>`,"")}(e)}</thead>\n        <tbody>${function(e){return function e({data:t,root:r,head:n}){if(t instanceof Array)return t.reduce((t,a,l)=>t+e({data:a,head:n=!!r||0!==l}),"");if(n){if(t.sel instanceof Array)return`<tr><td rowspan="${t.sel.length}">${t.item}</td>${e({data:t.sel})}</tr>`;if(t.sale instanceof Array)return`<tr><td>${t.item}</td>${t.sale.reduce((e,t)=>`${e}<td>${t}</td>`,"")}</tr>`}else{if(t.sel instanceof Array)return`<td rowspan="${t.sel.length}">${t.item}</td>${e({data:t.sel})}`;if(t.sale instanceof Array)return`<td>${t.item}</td>${t.sale.reduce((e,t)=>`${e}<td>${t}</td>`,"")}`}}({data:e,root:!0})}(e)}</tbody>\n      </table>`}}!function(){let e=new a(JSON.stringify(n)),t=new o(".sel_box");t.generateElm(e.getSelection());let r=new c(".table_box");t.addHandler("datachange",t=>{let n=t.getSeldItems(),a=e.searchData(n);r.generateView(a)})}()},function(e,t){}]);