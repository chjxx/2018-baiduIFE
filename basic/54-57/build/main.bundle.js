!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);i(1);let r={baseLine:{lineWidth:2,lineStyle:"white",outRectDistance:[40,20],innerRect:{small:[.015,.1],middle:[.08,.27],big:[.25,.6]},innerRound:{radius:.13}}};function n(t,e){let i=e-t;return t+Math.round(i*Math.random())}class s{constructor(){}static factory(t,e){if("function"==typeof s[t])return s[t](e)}static football(t={}){return new a(t)}}class a extends s{constructor({maxSpeed:t,energy:e,explose:i}){super(),this.radius=10,this.maxSpeed=t||n(1,99),this.energy=e||n(1,99),this.explose=i||n(1,99)}enter(t){return this.field=t,this.ctx=t.ctx,this}setStartPoint(t,e){return this.currentX=this.startX=t,this.currentY=this.startY=e,this}render(t,e){return t=t||this.currentX,e=e||this.currentY,this.ctx.save(),this.ctx.fillStyle="white",this.ctx.strokeStyle="white",this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.arc(t,e,this.radius,0,2*Math.PI),this.ctx.fill(),this.ctx.restore(),this}runTo(t,e){let i=this,r=new Date,n=i.calculateMeter(1),s=i.calculateSpeedTime(i.explose),a=i.calculateKeepTime(i.energy),c=t-i.startX,h=e-i.startY,o=Math.abs(c),l=Math.abs(h),u=Math.atan2(h,c),d=!1;return new Promise((t,e)=>{requestAnimationFrame(function e(){let c,h,f,x,m=new Date-r;if(d)n=n>50?Math.max(n-20,0):n>20?Math.max(n-8,0):Math.max(n-3,0);else{if(m<=s){let t=m/s*i.maxSpeed;n=Math.min(t,i.maxSpeed)}if(m>=s+a){let t=n-.01*(m-s-a);n=Math.max(t,0)}}c=Math.cos(u)*n,h=Math.sin(u)*n,i.currentX+=c,i.currentY+=h,f=Math.abs(i.currentX-i.startX),x=Math.abs(i.currentY-i.startY),o<=f&&l<=x?(d=d||!0,0===n?(i.startX=i.currentX,i.startY=i.currentY,t()):requestAnimationFrame(e)):requestAnimationFrame(e)})})}calculateMeter(t){return 3+(t-1)/98*9}calculateSpeedTime(t){return 4e3-(t-1)/98*3e3}calculateKeepTime(t){return 1e4+(t-1)/98*5e3}}class c{constructor({width:t,height:e,contentId:i}){this.width=t,this.height=e,this.$container=document.querySelector(i),this.createCanvas(t,e)}createCanvas(t,e){if(this.$container){let i,r,n=this.$container.offsetWidth;r=`<canvas width="${t}" height="${e}" style="${i=this.$container.offsetHeight/n>=e/t?"width: 100%":"height: 100%"}"></canvas>`,this.$canvas=function(t){let e=document.createElement("div");return e.innerHTML=t,e.children[0]}(r),this.$container.appendChild(this.$canvas),this.ctx=this.$canvas.getContext("2d")}}static factory(t,e){if("function"==typeof c[t])return c[t](e)}static football(t){return new h(t)}}class h extends c{constructor(t){super(t),this.players=[],this.start()}start(){let t=this;requestAnimationFrame(function e(){t.createBackground(),t.players.forEach(t=>{t.render()}),requestAnimationFrame(e)})}createBackground(){this.ctx.save(),this.ctx.fillStyle="green",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.strokeStyle=r.baseLine.lineStyle,this.ctx.lineWidth=r.baseLine.lineWidth;let t=this.height*r.baseLine.innerRound.radius,e=r.baseLine.outRectDistance;this.innerRectWidth=this.width-2*e[0],this.innerRectHeight=this.height-2*e[1],this.ctx.strokeRect(...e,this.innerRectWidth,this.innerRectHeight);let i=((r.baseLine.innerRect.big[0]-r.baseLine.innerRect.middle[0])/2+r.baseLine.innerRect.middle[0])*this.height+e[0],n=this.height/2,s=this.width-i;this.ctx.beginPath(),this.ctx.arc(this.width/2,this.height/2,t,0,2*Math.PI),this.ctx.moveTo(i+t,n),this.ctx.arc(i,n,t,0,2*Math.PI,!0),this.ctx.moveTo(s+t,n),this.ctx.arc(s,n,t,0,2*Math.PI,!0),this.ctx.moveTo(this.width/2,e[1]),this.ctx.lineTo(this.width/2,this.height-e[1]),this.ctx.stroke(),this.createInnerRect("big","left"),this.createInnerRect("big","right"),this.createInnerRect("middle","left"),this.createInnerRect("middle","right"),this.createInnerRect("small","left"),this.createInnerRect("small","right"),this.ctx.restore()}createInnerRect(t,e){let i,n,s=this.innerRectHeight*r.baseLine.innerRect[t][0],a=this.innerRectHeight*r.baseLine.innerRect[t][1],c=r.baseLine.outRectDistance;i="small"===t?"left"===e?c[0]-s:this.width-c[0]:"left"===e?c[0]:this.width-c[0]-s,n=(this.height-a)/2,this.ctx.save(),this.ctx.strokeStyle=r.baseLine.lineStyle,this.ctx.lineWidth=r.baseLine.lineWidth,this.ctx.fillRect(i,n,s,a),this.ctx.strokeRect(i,n,s,a),this.ctx.restore()}addPlayer(t){t.constructor===a&&(t.enter(this),this.players.push(t))}}let o=c.factory("football",{width:"1000",height:"600",contentId:".container"}),l=s.factory("football",{explose:1,maxSpeed:1,energy:1}),u=s.factory("football",{explose:30,maxSpeed:60,energy:90}),d=s.factory("football",{explose:90,maxSpeed:60,energy:30}),f=s.factory("football",{explose:50,maxSpeed:50,energy:50}),x=s.factory("football",{explose:50,maxSpeed:70}),m=s.factory("football",{explose:99,maxSpeed:99,energy:99});o.addPlayer(l),o.addPlayer(u),o.addPlayer(d),o.addPlayer(f),o.addPlayer(x),o.addPlayer(m),l.setStartPoint(100,100),u.setStartPoint(100,180),d.setStartPoint(100,260),f.setStartPoint(100,340),x.setStartPoint(100,420),m.setStartPoint(100,500);!async function(){l.runTo(800,100),u.runTo(800,180),d.runTo(800,260),f.runTo(800,340),x.runTo(800,420),m.runTo(800,500)}()},function(t,e){}]);